{% extends "inicio.html" %}

{% block content %}
<!-- Mapa Neuronal Estratégico -->
<div class="mapa-neuronal-container">
    <div class="mapa-header">
        <h1 class="mapa-title">
            <i class="fas fa-project-diagram"></i> Mapa Neuronal Estratégico - Proyecto El Domo
        </h1>
        <div class="mapa-controls">
            <button class="btn-control" onclick="zoomIn()">
                <i class="fas fa-search-plus"></i> Zoom
            </button>
            <button class="btn-control" onclick="resetView()">
                <i class="fas fa-sync-alt"></i> Reiniciar
            </button>
            <button class="btn-control" onclick="toggleAnimations()">
                <i class="fas fa-play"></i> Animaciones
            </button>
            <button class="btn-control" onclick="exportMap()">
                <i class="fas fa-download"></i> Exportar
            </button>
            <div class="filter-controls">
                <select id="filtro-nivel" onchange="filtrarNodos()">
                    <option value="all">Todos los niveles</option>
                    <option value="objetivo">Objetivo Central</option>
                    <option value="ejes">Ejes Estratégicos</option>
                    <option value="estrategias">Estrategias</option>
                    <option value="actividades">Actividades</option>
                    <option value="tareas">Tareas</option>
                </select>
            </div>
        </div>
    </div>
    
    <div class="mapa-canvas" id="mapaCanvas">
        <!-- Canvas SVG para las conexiones -->
        <svg class="conexiones-svg" id="conexionesSvg"></svg>
        
        <!-- Contenedor para los nodos -->
        <div class="nodos-container" id="nodosContainer">
            <!-- Nodo Central - Objetivo Estratégico -->
            <div class="nodo nodo-central" id="nodo-objetivo">
                <div class="nodo-content">
                    <div class="nodo-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="nodo-title">OBJETIVO ESTRATÉGICO</div>
                    <div class="nodo-desc">
                        <div class="nodo-texto">
                            Consolidar la viabilidad y el respaldo social del Proyecto El Domo mediante un modelo de gestión integral que garantice la integridad y disponibilidad del recurso hídrico local...
                        </div>
                        <button class="btn-ver-mas" onclick="mostrarDetalleObjetivo()">Ver completo</button>
                    </div>
                    <div class="nodo-stats">
                        <div class="stat">
                            <i class="fas fa-layer-group"></i>
                            <span>7 Ejes</span>
                        </div>
                        <div class="stat">
                            <i class="fas fa-chess-board"></i>
                            <span id="total-estrategias">0 Estrategias</span>
                        </div>
                    </div>
                </div>
                <div class="nodo-pulse"></div>
            </div>
            
            <!-- Nodos de Ejes Estratégicos -->
            <div class="nodo nodo-eje" id="nodo-educacion" data-eje="educacion">
                <div class="nodo-content">
                    <div class="nodo-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div class="nodo-title">EDUCACIÓN</div>
                    <div class="nodo-stats">
                        <div class="stat">
                            <i class="fas fa-lightbulb"></i>
                            <span id="estrategias-educacion">0</span>
                        </div>
                    </div>
                    <div class="nodo-actions">
                        <button class="btn-nodo" onclick="mostrarEstrategias('educacion')">
                            <i class="fas fa-expand-alt"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="nodo nodo-eje" id="nodo-salud" data-eje="salud">
                <div class="nodo-content">
                    <div class="nodo-icon">
                        <i class="fas fa-heartbeat"></i>
                    </div>
                    <div class="nodo-title">SALUD</div>
                    <div class="nodo-stats">
                        <div class="stat">
                            <i class="fas fa-lightbulb"></i>
                            <span id="estrategias-salud">0</span>
                        </div>
                    </div>
                    <div class="nodo-actions">
                        <button class="btn-nodo" onclick="mostrarEstrategias('salud')">
                            <i class="fas fa-expand-alt"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="nodo nodo-eje" id="nodo-empleabilidad" data-eje="empleabilidad">
                <div class="nodo-content">
                    <div class="nodo-icon">
                        <i class="fas fa-briefcase"></i>
                    </div>
                    <div class="nodo-title">EMPLEABILIDAD</div>
                    <div class="nodo-stats">
                        <div class="stat">
                            <i class="fas fa-lightbulb"></i>
                            <span id="estrategias-empleabilidad">0</span>
                        </div>
                    </div>
                    <div class="nodo-actions">
                        <button class="btn-nodo" onclick="mostrarEstrategias('empleabilidad')">
                            <i class="fas fa-expand-alt"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="nodo nodo-eje" id="nodo-desarrollo" data-eje="desarrollo">
                <div class="nodo-content">
                    <div class="nodo-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="nodo-title">DESARROLLO ECONÓMICO</div>
                    <div class="nodo-stats">
                        <div class="stat">
                            <i class="fas fa-lightbulb"></i>
                            <span id="estrategias-desarrollo">0</span>
                        </div>
                    </div>
                    <div class="nodo-actions">
                        <button class="btn-nodo" onclick="mostrarEstrategias('desarrollo')">
                            <i class="fas fa-expand-alt"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="nodo nodo-eje" id="nodo-agua" data-eje="agua">
                <div class="nodo-content">
                    <div class="nodo-icon">
                        <i class="fas fa-tint"></i>
                    </div>
                    <div class="nodo-title">SOSTENIBILIDAD AMBIENTAL (AGUA)</div>
                    <div class="nodo-stats">
                        <div class="stat">
                            <i class="fas fa-lightbulb"></i>
                            <span id="estrategias-agua">0</span>
                        </div>
                    </div>
                    <div class="nodo-actions">
                        <button class="btn-nodo" onclick="mostrarEstrategias('agua')">
                            <i class="fas fa-expand-alt"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="nodo nodo-eje" id="nodo-comunicacion" data-eje="comunicacion">
                <div class="nodo-content">
                    <div class="nodo-icon">
                        <i class="fas fa-bullhorn"></i>
                    </div>
                    <div class="nodo-title">COMUNICACIÓN</div>
                    <div class="nodo-stats">
                        <div class="stat">
                            <i class="fas fa-lightbulb"></i>
                            <span id="estrategias-comunicacion">0</span>
                        </div>
                    </div>
                    <div class="nodo-actions">
                        <button class="btn-nodo" onclick="mostrarEstrategias('comunicacion')">
                            <i class="fas fa-expand-alt"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="nodo nodo-eje" id="nodo-institucional" data-eje="institucional">
                <div class="nodo-content">
                    <div class="nodo-icon">
                        <i class="fas fa-landmark"></i>
                    </div>
                    <div class="nodo-title">INSTITUCIONAL</div>
                    <div class="nodo-stats">
                        <div class="stat">
                            <i class="fas fa-lightbulb"></i>
                            <span id="estrategias-institucional">0</span>
                        </div>
                    </div>
                    <div class="nodo-actions">
                        <button class="btn-nodo" onclick="mostrarEstrategias('institucional')">
                            <i class="fas fa-expand-alt"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Nodos de Estrategias (se cargarán dinámicamente) -->
            <div class="estrategias-container" id="estrategiasContainer"></div>
            
            <!-- Nodos de Actividades (se cargarán dinámicamente) -->
            <div class="actividades-container" id="actividadesContainer"></div>
            
            <!-- Nodos de Tareas (se cargarán dinámicamente) -->
            <div class="tareas-container" id="tareasContainer"></div>
        </div>
    </div>
    
    <div class="mapa-legenda">
        <div class="legenda-item">
            <div class="legenda-color nodo-central-color"></div>
            <span>Objetivo Estratégico</span>
        </div>
        <div class="legenda-item">
            <div class="legenda-color nodo-eje-color"></div>
            <span>Ejes Estratégicos</span>
        </div>
        <div class="legenda-item">
            <div class="legenda-color nodo-estrategia-color"></div>
            <span>Estrategias</span>
        </div>
        <div class="legenda-item">
            <div class="legenda-color nodo-actividad-color"></div>
            <span>Actividades</span>
        </div>
        <div class="legenda-item">
            <div class="legenda-color nodo-tarea-color"></div>
            <span>Tareas</span>
        </div>
    </div>
    
    <div class="mapa-sidebar" id="sidebarDetalle">
        <div class="sidebar-header">
            <h3 id="sidebarTitulo">Detalles</h3>
            <button class="sidebar-close" onclick="cerrarSidebar()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="sidebar-content" id="sidebarContent">
            <!-- Contenido dinámico -->
        </div>
    </div>
</div>

<!-- Modal para el objetivo completo -->
<div class="modal-mapa" id="modalObjetivo">
    <div class="modal-content">
        <div class="modal-header">
            <h3><i class="fas fa-brain"></i> OBJETIVO ESTRATÉGICO COMPLETO</h3>
            <button class="modal-close" onclick="cerrarModal('modalObjetivo')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <p>Consolidar la viabilidad y el respaldo social del Proyecto El Domo mediante un modelo de gestión integral que garantice la integridad y disponibilidad del recurso hídrico local, asegurando su no afectación por las actividades mineras, a través de la repotenciación de sistemas comunitarios y el monitoreo estricto de su calidad; este compromiso se complementa con la mejora de equipamiento en salud, la intervención en infraestructura sanitaria y lúdica de 4 unidades educativas, la reubicación estratégica de al menos el 60% del personal local hacia nuevos departamentos, y una cooperación técnica con los GADs y niveles distritales, todo dinamizado por un sistema de comunicación comunitaria que transparente la propuesta de valor y los beneficios del proyecto en el AID y AII.</p>
        </div>
    </div>
</div>

<style>
    /* Contenedor principal del mapa */
    .mapa-neuronal-container {
        position: relative;
        height: 100vh;
        background: linear-gradient(135deg, #0c2461 0%, #1a5276 100%);
        overflow: hidden;
        padding: 20px;
    }
    
    .mapa-header {
        margin-bottom: 20px;
        color: white;
    }
    
    .mapa-title {
        font-size: 24px;
        font-weight: 700;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        gap: 10px;
        color: white;
        text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
    
    .mapa-controls {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        align-items: center;
    }
    
    .btn-control {
        padding: 8px 15px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: white;
        border-radius: 6px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
    }
    
    .btn-control:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: translateY(-2px);
    }
    
    .filter-controls select {
        padding: 8px 15px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: white;
        border-radius: 6px;
        backdrop-filter: blur(10px);
        min-width: 180px;
    }
    
    .filter-controls select option {
        background: #0c2461;
        color: white;
    }
    
    /* Canvas del mapa */
    .mapa-canvas {
        position: relative;
        width: 100%;
        height: calc(100vh - 150px);
        background: rgba(12, 36, 97, 0.3);
        border-radius: 12px;
        overflow: hidden;
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }
    
    .conexiones-svg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
    }
    
    .conexion {
        stroke-width: 2;
        stroke: rgba(52, 152, 219, 0.5);
        fill: none;
        animation: pulseLine 2s infinite;
    }
    
    .conexion.activa {
        stroke: rgba(46, 204, 113, 0.7);
        stroke-width: 3;
        filter: drop-shadow(0 0 4px rgba(46, 204, 113, 0.5));
    }
    
    @keyframes pulseLine {
        0% {
            stroke-opacity: 0.3;
        }
        50% {
            stroke-opacity: 0.8;
        }
        100% {
            stroke-opacity: 0.3;
        }
    }
    
    /* Nodos generales */
    .nodos-container {
        position: relative;
        width: 100%;
        height: 100%;
        z-index: 2;
    }
    
    .nodo {
        position: absolute;
        cursor: pointer;
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        transform-origin: center;
    }
    
    .nodo:hover {
        transform: scale(1.05) translateY(-5px);
        z-index: 100;
    }
    
    .nodo-content {
        background: white;
        border-radius: 12px;
        padding: 15px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        position: relative;
        transition: all 0.3s ease;
        min-width: 200px;
        border: 3px solid transparent;
    }
    
    /* Nodo central */
    .nodo-central {
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 10;
    }
    
    .nodo-central .nodo-content {
        background: linear-gradient(135deg, #9C27B0 0%, #7b1fa2 100%);
        color: white;
        border-color: #E1BEE7;
        min-width: 300px;
        max-width: 400px;
        animation: pulseCentral 3s infinite;
    }
    
    @keyframes pulseCentral {
        0% {
            box-shadow: 0 0 0 0 rgba(156, 39, 176, 0.4);
        }
        70% {
            box-shadow: 0 0 0 20px rgba(156, 39, 176, 0);
        }
        100% {
            box-shadow: 0 0 0 0 rgba(156, 39, 176, 0);
        }
    }
    
    .nodo-pulse {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 100%;
        height: 100%;
        border-radius: 50%;
        background: radial-gradient(circle, rgba(156, 39, 176, 0.2) 0%, rgba(156, 39, 176, 0) 70%);
        animation: radialPulse 3s infinite;
        z-index: -1;
    }
    
    @keyframes radialPulse {
        0% {
            transform: translate(-50%, -50%) scale(0.8);
            opacity: 0.5;
        }
        50% {
            transform: translate(-50%, -50%) scale(1.2);
            opacity: 0.2;
        }
        100% {
            transform: translate(-50%, -50%) scale(0.8);
            opacity: 0.5;
        }
    }
    
    .nodo-central .nodo-icon {
        width: 60px;
        height: 60px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 15px;
        font-size: 24px;
    }
    
    .nodo-central .nodo-title {
        font-size: 18px;
        font-weight: 700;
        text-align: center;
        margin-bottom: 10px;
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    
    .nodo-central .nodo-desc {
        font-size: 12px;
        line-height: 1.4;
        margin-bottom: 15px;
        text-align: center;
        opacity: 0.9;
        max-height: 100px;
        overflow: hidden;
    }
    
    .btn-ver-mas {
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: white;
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 11px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: block;
        margin: 0 auto;
    }
    
    .btn-ver-mas:hover {
        background: rgba(255, 255, 255, 0.3);
    }
    
    .nodo-stats {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 15px;
    }
    
    .stat {
        display: flex;
        align-items: center;
        gap: 5px;
        font-size: 11px;
        opacity: 0.8;
    }
    
    /* Nodos de ejes */
    .nodo-eje {
        z-index: 9;
    }
    
    .nodo-eje .nodo-content {
        background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
        color: white;
        border-color: #85C1E9;
        min-width: 180px;
        max-width: 200px;
    }
    
    .nodo-eje .nodo-icon {
        width: 50px;
        height: 50px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 10px;
        font-size: 20px;
    }
    
    .nodo-eje .nodo-title {
        font-size: 14px;
        font-weight: 600;
        text-align: center;
        margin-bottom: 8px;
        line-height: 1.2;
    }
    
    .nodo-eje .nodo-stats {
        margin-top: 10px;
        font-size: 12px;
    }
    
    .nodo-actions {
        position: absolute;
        top: 10px;
        right: 10px;
    }
    
    .btn-nodo {
        width: 30px;
        height: 30px;
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 12px;
    }
    
    .btn-nodo:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: scale(1.1);
    }
    
    /* Nodos de estrategias (dinámicos) */
    .nodo-estrategia .nodo-content {
        background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
        color: white;
        border-color: #A3E4D7;
        min-width: 160px;
        max-width: 180px;
    }
    
    .nodo-estrategia .nodo-icon {
        width: 40px;
        height: 40px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 8px;
        font-size: 16px;
    }
    
    .nodo-estrategia .nodo-title {
        font-size: 12px;
        font-weight: 600;
        text-align: center;
        margin-bottom: 5px;
        line-height: 1.2;
    }
    
    .nodo-estrategia .nodo-desc {
        font-size: 10px;
        line-height: 1.2;
        opacity: 0.9;
        max-height: 60px;
        overflow: hidden;
    }
    
    /* Nodos de actividades (dinámicos) */
    .nodo-actividad .nodo-content {
        background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        color: white;
        border-color: #F1948A;
        min-width: 140px;
        max-width: 160px;
    }
    
    .nodo-actividad .nodo-icon {
        width: 35px;
        height: 35px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 8px;
        font-size: 14px;
    }
    
    .nodo-actividad .nodo-title {
        font-size: 11px;
        font-weight: 600;
        text-align: center;
        line-height: 1.2;
    }
    
    /* Nodos de tareas (dinámicos) */
    .nodo-tarea .nodo-content {
        background: linear-gradient(135deg, #f39c12 0%, #d35400 100%);
        color: white;
        border-color: #F7DC6F;
        min-width: 120px;
        max-width: 140px;
    }
    
    .nodo-tarea .nodo-icon {
        width: 30px;
        height: 30px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 5px;
        font-size: 12px;
    }
    
    .nodo-tarea .nodo-title {
        font-size: 10px;
        font-weight: 600;
        text-align: center;
        line-height: 1.2;
    }
    
    /* Leyenda */
    .mapa-legenda {
        position: absolute;
        bottom: 20px;
        right: 20px;
        background: rgba(0, 0, 0, 0.7);
        backdrop-filter: blur(10px);
        border-radius: 8px;
        padding: 15px;
        display: flex;
        flex-direction: column;
        gap: 8px;
        z-index: 10;
    }
    
    .legenda-item {
        display: flex;
        align-items: center;
        gap: 10px;
        color: white;
        font-size: 12px;
    }
    
    .legenda-color {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        border: 2px solid rgba(255, 255, 255, 0.3);
    }
    
    .nodo-central-color {
        background: linear-gradient(135deg, #9C27B0 0%, #7b1fa2 100%);
    }
    
    .nodo-eje-color {
        background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
    }
    
    .nodo-estrategia-color {
        background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
    }
    
    .nodo-actividad-color {
        background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
    }
    
    .nodo-tarea-color {
        background: linear-gradient(135deg, #f39c12 0%, #d35400 100%);
    }
    
    /* Sidebar de detalles */
    .mapa-sidebar {
        position: absolute;
        top: 0;
        right: -400px;
        width: 380px;
        height: 100%;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        box-shadow: -5px 0 25px rgba(0, 0, 0, 0.2);
        transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 1000;
        overflow-y: auto;
    }
    
    .mapa-sidebar.open {
        right: 0;
    }
    
    .sidebar-header {
        padding: 20px;
        background: linear-gradient(135deg, #0c2461 0%, #1a5276 100%);
        color: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .sidebar-header h3 {
        margin: 0;
        font-size: 18px;
        font-weight: 600;
    }
    
    .sidebar-close {
        background: rgba(255, 255, 255, 0.2);
        border: none;
        color: white;
        width: 36px;
        height: 36px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .sidebar-content {
        padding: 20px;
    }
    
    /* Modal */
    .modal-mapa {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.8);
        z-index: 2000;
        align-items: center;
        justify-content: center;
        padding: 20px;
        opacity: 0;
        transition: opacity 0.3s ease;
    }
    
    .modal-mapa.active {
        display: flex;
        opacity: 1;
    }
    
    .modal-content {
        background: white;
        border-radius: 12px;
        max-width: 800px;
        width: 100%;
        max-height: 80vh;
        overflow: hidden;
        transform: translateY(20px);
        transition: transform 0.3s ease;
    }
    
    .modal-mapa.active .modal-content {
        transform: translateY(0);
    }
    
    .modal-header {
        background: linear-gradient(135deg, #9C27B0 0%, #7b1fa2 100%);
        color: white;
        padding: 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .modal-header h3 {
        margin: 0;
        font-size: 18px;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .modal-close {
        background: rgba(255, 255, 255, 0.2);
        border: none;
        color: white;
        width: 36px;
        height: 36px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .modal-body {
        padding: 30px;
        font-size: 14px;
        line-height: 1.8;
        color: #333;
        text-align: justify;
        max-height: calc(80vh - 80px);
        overflow-y: auto;
    }
    
    /* Animaciones */
    @keyframes aparecerNodo {
        from {
            opacity: 0;
            transform: scale(0.5) translateY(50px);
        }
        to {
            opacity: 1;
            transform: scale(1) translateY(0);
        }
    }
    
    .nodo-aparecer {
        animation: aparecerNodo 0.6s ease forwards;
    }
    
    @keyframes conectarLinea {
        from {
            stroke-dashoffset: 1000;
        }
        to {
            stroke-dashoffset: 0;
        }
    }
    
    .conexion-animada {
        stroke-dasharray: 1000;
        stroke-dashoffset: 1000;
        animation: conectarLinea 2s ease-in-out forwards;
    }
    
    /* Responsive */
    @media (max-width: 1200px) {
        .mapa-sidebar {
            width: 320px;
        }
        
        .nodo-central .nodo-content {
            min-width: 250px;
            max-width: 300px;
        }
    }
    
    @media (max-width: 768px) {
        .mapa-controls {
            flex-direction: column;
            align-items: flex-start;
        }
        
        .mapa-sidebar {
            width: 100%;
            right: -100%;
        }
        
        .mapa-legenda {
            position: relative;
            bottom: auto;
            right: auto;
            margin-top: 20px;
            width: 100%;
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .nodo-central .nodo-content {
            min-width: 200px;
            max-width: 250px;
        }
        
        .nodo-eje .nodo-content {
            min-width: 150px;
            max-width: 160px;
        }
    }
</style>

<script>
    // Variables globales
    let nodos = {
        ejes: [
            { id: 'educacion', nombre: 'EDUCACIÓN', icono: 'graduation-cap', x: 20, y: 20 },
            { id: 'salud', nombre: 'SALUD', icono: 'heartbeat', x: 80, y: 20 },
            { id: 'empleabilidad', nombre: 'EMPLEABILIDAD', icono: 'briefcase', x: 20, y: 80 },
            { id: 'desarrollo', nombre: 'DESARROLLO ECONÓMICO', icono: 'chart-line', x: 80, y: 80 },
            { id: 'agua', nombre: 'SOSTENIBILIDAD AMBIENTAL (AGUA)', icono: 'tint', x: 20, y: 140 },
            { id: 'comunicacion', nombre: 'COMUNICACIÓN', icono: 'bullhorn', x: 80, y: 140 },
            { id: 'institucional', nombre: 'INSTITUCIONAL', icono: 'landmark', x: 50, y: 200 }
        ],
        estrategias: [],
        actividades: [],
        tareas: []
    };
    
    let conexiones = [];
    let animacionesActivas = true;
    let zoomLevel = 1;
    
    // Inicializar al cargar
    document.addEventListener('DOMContentLoaded', function() {
        inicializarMapa();
        cargarDatos();
        animarEntrada();
        
        // Agregar evento de redimensionamiento
        window.addEventListener('resize', recalcularPosiciones);
        
        // Agregar interactividad a los nodos
        document.querySelectorAll('.nodo').forEach(nodo => {
            nodo.addEventListener('click', function(e) {
                e.stopPropagation();
                const id = this.id;
                mostrarDetallesNodo(id);
            });
        });
    });
    
    // Inicializar el mapa
    function inicializarMapa() {
        const canvas = document.getElementById('mapaCanvas');
        const width = canvas.offsetWidth;
        const height = canvas.offsetHeight;
        
        // Posicionar nodos de ejes en círculo alrededor del centro
        const centroX = width / 2;
        const centroY = height / 2;
        const radioEjes = Math.min(width, height) * 0.25;
        const angulo = (2 * Math.PI) / 7;
        
        nodos.ejes.forEach((eje, index) => {
            const angle = angulo * index - Math.PI / 2;
            eje.x = centroX + radioEjes * Math.cos(angle);
            eje.y = centroY + radioEjes * Math.sin(angle);
            
            const nodo = document.getElementById(`nodo-${eje.id}`);
            if (nodo) {
                nodo.style.left = `${eje.x}px`;
                nodo.style.top = `${eje.y}px`;
                nodo.style.transform = 'translate(-50%, -50%)';
            }
        });
        
        // Dibujar conexiones iniciales
        dibujarConexiones();
    }
    
    // Recalcular posiciones al redimensionar
    function recalcularPosiciones() {
        inicializarMapa();
        if (nodos.estrategias.length > 0) {
            posicionarEstrategias();
        }
    }
    
    // Cargar datos del backend
    function cargarDatos() {
        // Cargar estrategias
        fetch('/api/estrategias_foda_con_eje')
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    nodos.estrategias = data.estrategias;
                    actualizarContadoresEjes();
                    posicionarEstrategias();
                }
            })
            .catch(error => {
                console.error('Error al cargar estrategias:', error);
            });
        
        // Aquí puedes cargar actividades y tareas desde tus endpoints
        // fetch('/api/actividades')
        // fetch('/api/tareas')
    }
    
    // Actualizar contadores de estrategias por eje
    function actualizarContadoresEjes() {
        const contadores = {
            educacion: 0,
            salud: 0,
            empleabilidad: 0,
            desarrollo: 0,
            agua: 0,
            comunicacion: 0,
            institucional: 0
        };
        
        nodos.estrategias.forEach(estrategia => {
            if (contadores[estrategia.eje_id]) {
                contadores[estrategia.eje_id]++;
            }
        });
        
        // Actualizar UI
        Object.keys(contadores).forEach(ejeId => {
            const elemento = document.getElementById(`estrategias-${ejeId}`);
            if (elemento) {
                elemento.textContent = contadores[ejeId];
            }
        });
        
        // Actualizar total
        const totalEstrategias = nodos.estrategias.length;
        document.getElementById('total-estrategias').textContent = `${totalEstrategias} Estrategias`;
    }
    
    // Posicionar estrategias alrededor de sus ejes
    function posicionarEstrategias() {
        const estrategiasContainer = document.getElementById('estrategiasContainer');
        estrategiasContainer.innerHTML = '';
        
        nodos.estrategias.forEach((estrategia, index) => {
            const eje = nodos.ejes.find(e => e.id === estrategia.eje_id);
            if (!eje) return;
            
            // Crear nodo de estrategia
            const estrategiaDiv = document.createElement('div');
            estrategiaDiv.className = 'nodo nodo-estrategia nodo-aparecer';
            estrategiaDiv.id = `estrategia-${estrategia.id}`;
            estrategiaDiv.dataset.estrategiaId = estrategia.id;
            estrategiaDiv.dataset.ejeId = estrategia.eje_id;
            
            // Posicionar en círculo alrededor del eje
            const estrategiasPorEje = nodos.estrategias.filter(e => e.eje_id === estrategia.eje_id);
            const indiceEnEje = estrategiasPorEje.indexOf(estrategia);
            const totalEnEje = estrategiasPorEje.length;
            const angulo = (2 * Math.PI / totalEnEje) * indiceEnEje;
            const radioEstrategias = 120;
            
            estrategia.x = eje.x + radioEstrategias * Math.cos(angulo);
            estrategia.y = eje.y + radioEstrategias * Math.sin(angulo);
            
            estrategiaDiv.style.left = `${estrategia.x}px`;
            estrategiaDiv.style.top = `${estrategia.y}px`;
            estrategiaDiv.style.transform = 'translate(-50%, -50%)';
            estrategiaDiv.style.animationDelay = `${index * 0.1}s`;
            
            // Contenido del nodo
            let tipoTexto = '';
            switch(estrategia.tipo_cruce) {
                case 'FO': tipoTexto = 'F+O'; break;
                case 'DO': tipoTexto = 'D+O'; break;
                case 'FA': tipoTexto = 'F+A'; break;
                case 'DA': tipoTexto = 'D+A'; break;
            }
            
            estrategiaDiv.innerHTML = `
                <div class="nodo-content">
                    <div class="nodo-icon">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <div class="nodo-title">${tipoTexto}: ${estrategia.eje_texto}</div>
                    <div class="nodo-desc">${estrategia.estrategia.substring(0, 60)}...</div>
                    <div class="nodo-actions">
                        <button class="btn-nodo" onclick="mostrarActividades(${estrategia.id}, '${estrategia.eje_id}')">
                            <i class="fas fa-expand-alt"></i>
                        </button>
                    </div>
                </div>
            `;
            
            estrategiasContainer.appendChild(estrategiaDiv);
            
            // Crear conexión con el eje
            crearConexion(eje.x, eje.y, estrategia.x, estrategia.y, 'eje-estrategia');
        });
        
        // Animar conexiones después de un retraso
        setTimeout(dibujarConexiones, 500);
    }
    
    // Mostrar actividades de una estrategia
    function mostrarActividades(estrategiaId, ejeId) {
        // Filtrar actividades por estrategia (esto vendría del backend)
        const actividadesFiltradas = []; // Aquí cargarías las actividades reales
        
        // Por ahora, crear actividades de ejemplo
        const actividadesEjemplo = [
            { id: 1, nombre: 'Actividad 1', descripcion: 'Descripción actividad 1' },
            { id: 2, nombre: 'Actividad 2', descripcion: 'Descripción actividad 2' },
            { id: 3, nombre: 'Actividad 3', descripcion: 'Descripción actividad 3' }
        ];
        
        const estrategia = nodos.estrategias.find(e => e.id === estrategiaId);
        if (!estrategia) return;
        
        const actividadesContainer = document.getElementById('actividadesContainer');
        actividadesContainer.innerHTML = '';
        
        actividadesEjemplo.forEach((actividad, index) => {
            const actividadDiv = document.createElement('div');
            actividadDiv.className = 'nodo nodo-actividad nodo-aparecer';
            actividadDiv.id = `actividad-${actividad.id}`;
            
            // Posicionar en círculo alrededor de la estrategia
            const angulo = (2 * Math.PI / actividadesEjemplo.length) * index;
            const radioActividades = 100;
            
            const actividadX = estrategia.x + radioActividades * Math.cos(angulo);
            const actividadY = estrategia.y + radioActividades * Math.sin(angulo);
            
            actividadDiv.style.left = `${actividadX}px`;
            actividadDiv.style.top = `${actividadY}px`;
            actividadDiv.style.transform = 'translate(-50%, -50%)';
            actividadDiv.style.animationDelay = `${index * 0.1}s`;
            
            actividadDiv.innerHTML = `
                <div class="nodo-content">
                    <div class="nodo-icon">
                        <i class="fas fa-tasks"></i>
                    </div>
                    <div class="nodo-title">${actividad.nombre}</div>
                    <div class="nodo-actions">
                        <button class="btn-nodo" onclick="mostrarTareas(${actividad.id})">
                            <i class="fas fa-expand-alt"></i>
                        </button>
                    </div>
                </div>
            `;
            
            actividadesContainer.appendChild(actividadDiv);
            
            // Crear conexión con la estrategia
            crearConexion(estrategia.x, estrategia.y, actividadX, actividadY, 'estrategia-actividad');
        });
        
        dibujarConexiones();
    }
    
    // Mostrar tareas de una actividad
    function mostrarTareas(actividadId) {
        // Tareas de ejemplo
        const tareasEjemplo = [
            { id: 1, nombre: 'Tarea 1', estado: 'pendiente' },
            { id: 2, nombre: 'Tarea 2', estado: 'en-progreso' },
            { id: 3, nombre: 'Tarea 3', estado: 'completada' }
        ];
        
        const tareasContainer = document.getElementById('tareasContainer');
        tareasContainer.innerHTML = '';
        
        // En una implementación real, buscarías la actividad específica
        const actividadElement = document.getElementById(`actividad-${actividadId}`);
        if (!actividadElement) return;
        
        const rect = actividadElement.getBoundingClientRect();
        const actividadX = rect.left + rect.width / 2;
        const actividadY = rect.top + rect.height / 2;
        
        tareasEjemplo.forEach((tarea, index) => {
            const tareaDiv = document.createElement('div');
            tareaDiv.className = 'nodo nodo-tarea nodo-aparecer';
            tareaDiv.id = `tarea-${tarea.id}`;
            
            // Posicionar en círculo alrededor de la actividad
            const angulo = (2 * Math.PI / tareasEjemplo.length) * index;
            const radioTareas = 80;
            
            const tareaX = actividadX + radioTareas * Math.cos(angulo);
            const tareaY = actividadY + radioTareas * Math.sin(angulo);
            
            tareaDiv.style.left = `${tareaX}px`;
            tareaDiv.style.top = `${tareaY}px`;
            tareaDiv.style.transform = 'translate(-50%, -50%)';
            tareaDiv.style.animationDelay = `${index * 0.1}s`;
            
            let estadoColor = '';
            switch(tarea.estado) {
                case 'completada': estadoColor = '#2ecc71'; break;
                case 'en-progreso': estadoColor = '#3498db'; break;
                default: estadoColor = '#e74c3c';
            }
            
            tareaDiv.innerHTML = `
                <div class="nodo-content">
                    <div class="nodo-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="nodo-title">${tarea.nombre}</div>
                    <div class="tarea-estado" style="background: ${estadoColor}"></div>
                </div>
            `;
            
            tareasContainer.appendChild(tareaDiv);
            
            // Crear conexión con la actividad
            crearConexion(actividadX, actividadY, tareaX, tareaY, 'actividad-tarea');
        });
        
        dibujarConexiones();
    }
    
    // Crear una conexión entre dos puntos
    function crearConexion(x1, y1, x2, y2, tipo) {
        conexiones.push({
            x1, y1, x2, y2, tipo,
            id: `conexion-${conexiones.length}`
        });
    }
    
    // Dibujar todas las conexiones
    function dibujarConexiones() {
        const svg = document.getElementById('conexionesSvg');
        svg.innerHTML = '';
        
        conexiones.forEach(conexion => {
            const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            line.setAttribute('x1', conexion.x1);
            line.setAttribute('y1', conexion.y1);
            line.setAttribute('x2', conexion.x2);
            line.setAttribute('y2', conexion.y2);
            line.setAttribute('class', `conexion ${animacionesActivas ? 'conexion-animada' : ''}`);
            
            // Asignar color según tipo
            let color = '';
            switch(conexion.tipo) {
                case 'eje-estrategia': color = 'rgba(52, 152, 219, 0.5)'; break;
                case 'estrategia-actividad': color = 'rgba(46, 204, 113, 0.5)'; break;
                case 'actividad-tarea': color = 'rgba(231, 76, 60, 0.5)'; break;
                default: color = 'rgba(255, 255, 255, 0.3)';
            }
            
            line.style.stroke = color;
            svg.appendChild(line);
        });
    }
    
    // Animación de entrada
    function animarEntrada() {
        const nodos = document.querySelectorAll('.nodo');
        nodos.forEach((nodo, index) => {
            nodo.classList.add('nodo-aparecer');
            nodo.style.animationDelay = `${index * 0.1}s`;
        });
        
        // Dibujar conexiones después de que aparezcan los nodos
        setTimeout(dibujarConexiones, nodos.length * 100);
    }
    
    // Mostrar detalles de un nodo
    function mostrarDetallesNodo(nodoId) {
        const sidebar = document.getElementById('sidebarDetalle');
        const content = document.getElementById('sidebarContent');
        const titulo = document.getElementById('sidebarTitulo');
        
        let contenidoHTML = '';
        
        if (nodoId === 'nodo-objetivo') {
            titulo.textContent = 'OBJETIVO ESTRATÉGICO';
            contenidoHTML = `
                <div class="detalle-objetivo">
                    <h4>Proyecto El Domo</h4>
                    <p>Consolidar la viabilidad y el respaldo social del Proyecto El Domo mediante un modelo de gestión integral que garantice la integridad y disponibilidad del recurso hídrico local, asegurando su no afectación por las actividades mineras...</p>
                    <button class="btn-detalle" onclick="mostrarDetalleObjetivo()">Ver objetivo completo</button>
                    
                    <div class="detalle-stats">
                        <h5>Estadísticas:</h5>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <i class="fas fa-layer-group"></i>
                                <span>7 Ejes Estratégicos</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-chess-board"></i>
                                <span>${nodos.estrategias.length} Estrategias</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        } else if (nodoId.includes('nodo-')) {
            const ejeId = nodoId.replace('nodo-', '');
            const eje = nodos.ejes.find(e => e.id === ejeId);
            if (eje) {
                titulo.textContent = `EJE: ${eje.nombre}`;
                const estrategiasEje = nodos.estrategias.filter(e => e.eje_id === ejeId);
                
                contenidoHTML = `
                    <div class="detalle-eje">
                        <div class="eje-icon">
                            <i class="fas fa-${eje.icono}"></i>
                        </div>
                        <h4>${eje.nombre}</h4>
                        <div class="eje-stats">
                            <div class="stat-item">
                                <i class="fas fa-lightbulb"></i>
                                <span>${estrategiasEje.length} Estrategias</span>
                            </div>
                        </div>
                        
                        ${estrategiasEje.length > 0 ? `
                            <div class="estrategias-lista">
                                <h5>Estrategias relacionadas:</h5>
                                ${estrategiasEje.map(estrategia => `
                                    <div class="estrategia-item">
                                        <div class="estrategia-tipo ${estrategia.tipo_cruce.toLowerCase()}">
                                            ${estrategia.tipo_cruce}
                                        </div>
                                        <div class="estrategia-texto">${estrategia.estrategia.substring(0, 80)}...</div>
                                    </div>
                                `).join('')}
                            </div>
                        ` : '<p>No hay estrategias asignadas a este eje aún.</p>'}
                        
                        <button class="btn-detalle" onclick="mostrarEstrategias('${ejeId}')">
                            <i class="fas fa-expand-alt"></i> Ver todas las estrategias
                        </button>
                    </div>
                `;
            }
        }
        
        content.innerHTML = contenidoHTML;
        sidebar.classList.add('open');
    }
    
    // Mostrar estrategias de un eje específico
    function mostrarEstrategias(ejeId) {
        // Filtrar el mapa para mostrar solo estrategias de este eje
        const todasEstrategias = document.querySelectorAll('.nodo-estrategia');
        const otrosNodos = document.querySelectorAll('.nodo:not(.nodo-estrategia):not(.nodo-central):not(.nodo-eje)');
        
        // Ocultar todos los nodos primero
        todasEstrategias.forEach(nodo => {
            if (nodo.dataset.ejeId === ejeId) {
                nodo.style.display = 'block';
                // Resaltar el nodo
                nodo.style.zIndex = '100';
                nodo.style.boxShadow = '0 0 20px rgba(46, 204, 113, 0.8)';
            } else {
                nodo.style.display = 'none';
            }
        });
        
        // Ocultar actividades y tareas
        otrosNodos.forEach(nodo => nodo.style.display = 'none');
        
        // Resaltar el eje seleccionado
        const ejeSeleccionado = document.getElementById(`nodo-${ejeId}`);
        if (ejeSeleccionado) {
            ejeSeleccionado.style.zIndex = '50';
            ejeSeleccionado.style.boxShadow = '0 0 20px rgba(52, 152, 219, 0.8)';
        }
        
        // Mostrar mensaje
        mostrarNotificacion(`Mostrando estrategias del eje: ${ejeId.toUpperCase()}`, 'info');
    }
    
    // Mostrar todas las estrategias
    function mostrarTodasEstrategias() {
        const todosNodos = document.querySelectorAll('.nodo');
        todosNodos.forEach(nodo => {
            nodo.style.display = 'block';
            nodo.style.zIndex = '';
            nodo.style.boxShadow = '';
        });
        
        mostrarNotificacion('Mostrando todos los nodos', 'success');
    }
    
    // Filtrar nodos por nivel
    function filtrarNodos() {
        const nivel = document.getElementById('filtro-nivel').value;
        const todosNodos = document.querySelectorAll('.nodo');
        
        todosNodos.forEach(nodo => {
            if (nivel === 'all') {
                nodo.style.display = 'block';
                return;
            }
            
            if (nivel === 'objetivo' && nodo.classList.contains('nodo-central')) {
                nodo.style.display = 'block';
            } else if (nivel === 'ejes' && nodo.classList.contains('nodo-eje')) {
                nodo.style.display = 'block';
            } else if (nivel === 'estrategias' && nodo.classList.contains('nodo-estrategia')) {
                nodo.style.display = 'block';
            } else if (nivel === 'actividades' && nodo.classList.contains('nodo-actividad')) {
                nodo.style.display = 'block';
            } else if (nivel === 'tareas' && nodo.classList.contains('nodo-tarea')) {
                nodo.style.display = 'block';
            } else {
                nodo.style.display = 'none';
            }
        });
    }
    
    // Funciones de control
    function zoomIn() {
        const canvas = document.getElementById('mapaCanvas');
        zoomLevel += 0.1;
        canvas.style.transform = `scale(${zoomLevel})`;
    }
    
    function resetView() {
        const canvas = document.getElementById('mapaCanvas');
        zoomLevel = 1;
        canvas.style.transform = 'scale(1)';
        mostrarTodasEstrategias();
    }
    
    function toggleAnimations() {
        animacionesActivas = !animacionesActivas;
        const conexiones = document.querySelectorAll('.conexion');
        
        conexiones.forEach(conexion => {
            if (animacionesActivas) {
                conexion.classList.add('conexion-animada');
            } else {
                conexion.classList.remove('conexion-animada');
            }
        });
        
        mostrarNotificacion(`Animaciones ${animacionesActivas ? 'activadas' : 'desactivadas'}`, 'info');
    }
    
    function exportMap() {
        // En una implementación real, esto exportaría el mapa como imagen
        mostrarNotificacion('Exportando mapa...', 'success');
        setTimeout(() => {
            mostrarNotificacion('Mapa exportado exitosamente', 'success');
        }, 1500);
    }
    
    function mostrarDetalleObjetivo() {
        document.getElementById('modalObjetivo').classList.add('active');
    }
    
    function cerrarModal(modalId) {
        document.getElementById(modalId).classList.remove('active');
    }
    
    function cerrarSidebar() {
        document.getElementById('sidebarDetalle').classList.remove('open');
    }
    
    function mostrarNotificacion(mensaje, tipo) {
        let notificacion = document.createElement('div');
        notificacion.className = 'notificacion-flotante';
        notificacion.style.cssText = `
            position: fixed;
            top: 100px;
            right: 20px;
            padding: 15px 20px;
            background: ${tipo === 'success' ? '#4CAF50' : tipo === 'info' ? '#2196F3' : '#FF9800'};
            color: white;
            border-radius: 8px;
            font-weight: 600;
            z-index: 10000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            animation: slideInRight 0.3s ease forwards;
            max-width: 300px;
        `;
        
        notificacion.innerHTML = `
            <i class="fas fa-${tipo === 'success' ? 'check-circle' : 'info-circle'}"></i>
            ${mensaje}
        `;
        
        document.body.appendChild(notificacion);
        
        setTimeout(() => {
            notificacion.style.animation = 'slideOutRight 0.3s ease forwards';
            setTimeout(() => {
                if (notificacion.parentNode) {
                    notificacion.parentNode.removeChild(notificacion);
                }
            }, 300);
        }, 3000);
    }
    
    // Estilos adicionales para las notificaciones
    const style = document.createElement('style');
    style.textContent = `
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes slideOutRight {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
        
        .detalle-eje, .detalle-objetivo {
            padding: 10px;
        }
        
        .eje-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            color: white;
            font-size: 24px;
        }
        
        .estrategias-lista {
            margin-top: 20px;
        }
        
        .estrategia-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 10px;
            border-left: 4px solid #2ecc71;
        }
        
        .estrategia-tipo {
            display: inline-block;
            padding: 2px 8px;
            background: #2ecc71;
            color: white;
            border-radius: 4px;
            font-size: 10px;
            margin-right: 8px;
        }
        
        .estrategia-texto {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
        
        .btn-detalle {
            width: 100%;
            padding: 10px;
            background: linear-gradient(135deg, #0c2461 0%, #1a5276 100%);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .tarea-estado {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin: 5px auto 0;
        }
    `;
    document.head.appendChild(style);
</script>
{% endblock %}
